"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{60155:function(e,t,i){var n=i(85893),l=i(67294),r=i(69661),s=i(2734),a=i(41796),o=i(50591);let c=(0,l.forwardRef)((e,t)=>{let{sx:i,src:l,skin:c,color:d}=e,x=(0,s.Z)(),m=(0,o.Z)(),h=(e,t)=>"light"===e?{...m["".concat(t,"Light")]}:"light-static"===e?{color:m["".concat(t,"Light")].color,backgroundColor:(0,a.$n)(x.palette[t].main,.88)}:{...m["".concat(t,"Filled")]},u={primary:h(c,"primary"),secondary:h(c,"secondary"),success:h(c,"success"),error:h(c,"error"),warning:h(c,"warning"),info:h(c,"info")};return(0,n.jsx)(r.Z,{ref:t,...e,sx:!l&&c&&d?Object.assign(u[d],i):i})});c.defaultProps={skin:"filled",color:"primary"},t.Z=c},16456:function(e,t,i){var n=i(5152),l=i.n(n);let r=l()(()=>Promise.all([i.e(814),i.e(394)]).then(i.bind(i,47229)),{loadableGenerated:{webpack:()=>[47229]},ssr:!1});t.Z=r},81883:function(e,t,i){i.r(t),i.d(t,{default:function(){return en}});var n,l,r=i(85893),s=i(67294),a=i(41664),o=i.n(a),c=i(87357),d=i(86886),x=i(66242),m=i(90948),h=i(15861),u=i(54028),p=i(9473),g=i(5834),f=i(50613),j=i(82229),Z=i(87819),v=i(31704),b=i(51089),y=i(67720),E=i(2734),C=i(78445),S=i(44267),L=i(63730),D=i(60155),k=i(16456),P=i(25812);(n=l||(l={})).Cash="efectivo",n.Check="cheque",n.Transfer="transferencia",n.Credit="credito";var z=i(80291);let w=e=>{let t=e.filter(e=>e.status===b.L1.Entregado&&e.tipoPago===l.Cash),i=t.reduce((e,t)=>e+=t.bruto_E,0),n=e.filter(e=>e.status===b.L1.Entregado&&e.tipoPago===l.Check),r=n.reduce((e,t)=>e+=t.bruto_E,0),s=e.filter(e=>e.status===b.L1.Entregado&&e.tipoPago===l.Credit),a=s.reduce((e,t)=>e+=t.bruto_E,0),o=e.filter(e=>e.status===b.L1.Entregado&&e.tipoPago===l.Transfer),c=o.reduce((e,t)=>e+=t.bruto_E,0),d=e.filter(e=>e.status===b.L1.Entregado),x=d.reduce((e,t)=>e+=t.bruto_E,0),m=d.length,h=e.length,u=[t.length,n.length,s.length,o.length];return{total:x,cash:i,check:r,credit:a,transfer:c,donut:u,totalDelivared:m,totalDocs:h}},I=e=>{let t=(0,E.Z)(),i=w(e.docsData),n=s.useCallback(()=>({chart:{sparkline:{enabled:!0}},colors:[t.palette.primary.main,(0,P.E)(t.palette.primary.main,.7),(0,P.E)(t.palette.primary.main,.5),t.palette.customColors.trackBg],stroke:{width:0},legend:{show:!1},dataLabels:{enabled:!1},labels:["Cheque","Efectivo","Cr\xe9dito","Transferencia"],states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},plotOptions:{pie:{customScale:.9,donut:{size:"70%",labels:{show:!0,name:{offsetY:25,fontSize:"0.875rem",color:t.palette.text.secondary},value:{offsetY:-15,fontWeight:500,formatter:e=>"".concat(e),color:t.palette.text.primary},total:{show:!0,fontSize:"0.875rem",label:"Total Entregas",color:t.palette.text.secondary,formatter:e=>"".concat(e.globals.seriesTotals.reduce((e,t)=>e+t))}}}}}}),[i]);return(0,r.jsx)(x.Z,{children:(0,r.jsxs)(z.Z,{isLoading:e.isLoading,children:[(0,r.jsx)(C.Z,{title:"Entregas",titleTypographyProps:{sx:{lineHeight:"1.5rem !important",letterSpacing:"0.15px !important"}}}),(0,r.jsx)(S.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,sx:{my:[0,4,3]},children:[(0,r.jsx)(d.ZP,{item:!0,xs:12,sm:6,sx:{mb:[3,0]},children:(0,r.jsx)(k.Z,{type:"donut",height:200,series:i.donut,options:n()})}),(0,r.jsxs)(d.ZP,{item:!0,xs:12,sm:6,sx:{my:"auto"},children:[(0,r.jsxs)(c.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:[(0,r.jsx)(D.Z,{skin:"light",variant:"rounded",sx:{mr:3,"& svg":{color:"primary.main"}},children:(0,r.jsx)(L.Z,{icon:"mdi:currency-usd"})}),(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"body2",children:"Total Entregas"}),(0,r.jsx)(h.Z,{variant:"h6",children:(0,v.Z)(i.total)})]})]}),(0,r.jsx)(y.Z,{sx:{my:e=>"".concat(e.spacing(4)," !important")}}),(0,r.jsxs)(d.ZP,{container:!0,children:[(0,r.jsxs)(d.ZP,{item:!0,xs:6,sx:{mb:4},children:[(0,r.jsxs)(c.Z,{sx:{mb:1.5,display:"flex",alignItems:"center","& svg":{mr:1.5,fontSize:"0.75rem",color:"primary.main"}},children:[(0,r.jsx)(L.Z,{icon:"mdi:circle"}),(0,r.jsx)(h.Z,{variant:"body2",children:"Efectivo"})]}),(0,r.jsx)(h.Z,{sx:{fontWeight:600},children:(0,v.Z)(i.cash)})]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sx:{mb:4},children:[(0,r.jsxs)(c.Z,{sx:{mb:1.5,display:"flex",alignItems:"center","& svg":{mr:1.5,fontSize:"0.75rem",color:(0,P.E)(t.palette.primary.main,.7)}},children:[(0,r.jsx)(L.Z,{icon:"mdi:circle"}),(0,r.jsx)(h.Z,{variant:"body2",children:"Cheque"})]}),(0,r.jsx)(h.Z,{sx:{fontWeight:600},children:(0,v.Z)(i.check)})]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(c.Z,{sx:{mb:1.5,display:"flex",alignItems:"center","& svg":{mr:1.5,fontSize:"0.75rem",color:(0,P.E)(t.palette.primary.main,.5)}},children:[(0,r.jsx)(L.Z,{icon:"mdi:circle"}),(0,r.jsx)(h.Z,{variant:"body2",children:"Transferencia"})]}),(0,r.jsx)(h.Z,{sx:{fontWeight:600},children:(0,v.Z)(i.transfer)})]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(c.Z,{sx:{mb:1.5,display:"flex",alignItems:"center","& svg":{mr:1.5,fontSize:"0.75rem",color:"customColors.trackBg"}},children:[(0,r.jsx)(L.Z,{icon:"mdi:circle"}),(0,r.jsx)(h.Z,{variant:"body2",children:"Cr\xe9dito"})]}),(0,r.jsx)(h.Z,{sx:{fontWeight:600},children:(0,v.Z)(i.credit)})]})]})]})]})})]})})};var W=i(83321);let T=e=>{var t,i,n;let l=[{stats:(null==e?void 0:null===(t=e.entregadas)||void 0===t?void 0:t.toString())||"",title:"Entregadas",color:"success",icon:"tabler:truck-delivery"},{stats:(null==e?void 0:null===(i=e.entregarDespues)||void 0===i?void 0:i.toString())||"",title:"Entregar Despu\xe9s",color:"info",icon:"quill:send-later"},{stats:(null==e?void 0:null===(n=e.noEntregadas)||void 0===n?void 0:n.toString())||"",color:"warning",title:"No Entregadas",icon:"dashicons:no"}];return l.map((e,t)=>(0,r.jsx)(d.ZP,{item:!0,xs:6,md:4,children:(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(D.Z,{variant:"rounded",color:e.color,sx:{mr:3,boxShadow:3},children:(0,r.jsx)(L.Z,{icon:e.icon,fontSize:"1.75rem"})}),(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"caption",children:e.title}),(0,r.jsx)(h.Z,{variant:"h6",children:e.stats})]})]},t)},t))},N=e=>{var t,i,n,l,s;return(0,r.jsx)(x.Z,{children:(0,r.jsx)(z.Z,{isLoading:e.isLoading,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{title:(0,r.jsx)(W.Z,{sx:{mb:2},component:o(),startIcon:(0,r.jsx)(L.Z,{icon:"ep:back"}),variant:"text",href:"/apps/transports/list",children:"Regresar Transporte"}),titleTypographyProps:{sx:{lineHeight:"2rem !important",letterSpacing:"0.15px !important"}}}),(0,r.jsx)(S.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,children:[(0,r.jsx)(d.ZP,{item:!0,xs:6,md:6,children:(0,r.jsx)(c.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"body2",children:"No. Transporte"}),(0,r.jsx)(h.Z,{variant:"h6",children:null===(t=e.docsData)||void 0===t?void 0:t.noTransporte})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,md:6,children:(0,r.jsx)(c.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"body2",children:"Distribuidor"}),(0,r.jsx)(h.Z,{variant:"h6",children:null===(i=e.docsData)||void 0===i?void 0:i.distribuidor.nombre})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,md:6,children:(0,r.jsx)(c.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"body2",children:"Status"}),(0,r.jsx)(f.Z,{skin:"light",size:"small",label:b.zD[(null===(n=e.docsData)||void 0===n?void 0:n.status)||0]||"",color:b.qG[(null===(l=e.docsData)||void 0===l?void 0:l.status)||""],sx:{textTransform:"capitalize"}})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,md:6,children:(0,r.jsx)(c.Z,{sx:{mr:2,display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{variant:"body2",children:"Fecha"}),(0,r.jsx)(h.Z,{variant:"h6",children:(0,Z.Z)((null===(s=e.docsData)||void 0===s?void 0:s.fecha)||"")})]})})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,md:12,children:(0,r.jsx)(y.Z,{sx:{mt:5,mb:5}})}),T(e.docsData)]})})]})})})};var _=i(71929),q=i(50657),F=i(37645),R=i(34386),M=i(93946),G=i(6514),O=i(37212),A=i(58367),B=i(52111);let H=e=>(t,i)=>(0,B.r7)(t)||t instanceof google.maps.LatLng||(0,B.r7)(i)||i instanceof google.maps.LatLng?new google.maps.LatLng(t).equals(new google.maps.LatLng(i)):e(t,i),Y=(0,A.createCustomEqual)(H);function J(e){let t=s.useRef();return Y(e,t.current)||(t.current=e),t.current}let Q=e=>{var t;let{center:i,zoom:n,children:l,...a}=e,o=s.useRef(null),[c,d]=s.useState();return s.useEffect(()=>{o.current&&!c&&d(new window.google.maps.Map(o.current,{center:i,zoom:n}))},[o,c]),t=()=>{c&&c.setOptions(a)},s.useEffect(t,[c,a].map(J)),(0,r.jsx)("div",{style:{height:"500px",width:"800px"},ref:o,id:"map",children:s.Children.map(l,e=>{if(s.isValidElement(e))return s.cloneElement(e,{map:c})})})},U=e=>e===O.Status.FAILURE?(0,r.jsx)("div",{children:"error"}):(0,r.jsx)("div",{children:"loading"}),V=e=>{let[t,i]=s.useState();return s.useEffect(()=>(t||i(new google.maps.Marker),()=>{t&&t.setMap(null)}),[t]),s.useEffect(()=>{t&&t.setOptions(e)},[t,e]),null},K=e=>{let t=null==e?void 0:e.reduce((e,t)=>{var i,n;return(null===(i=t.cliente.geoLocalizacion)||void 0===i?void 0:i.latitud)&&t.cliente.geoLocalizacion.longitud&&e.push({label:"".concat(t.cliente,"-").concat(t.cliente.nombre),icon:"http://maps.google.com/mapfiles/kml/paddle/blu-circle.png",position:{lng:null===(n=t.cliente.geoLocalizacion)||void 0===n?void 0:n.latitud,lat:t.cliente.geoLocalizacion.longitud}}),t.entregaLongitud&&t.entregaLatitud&&e.push({label:"".concat(t.cliente,"-").concat(t.cliente.nombre),icon:t.status===b.L1.Entregado?"http://maps.google.com/mapfiles/kml/paddle/grn-circle.png":"http://maps.google.com/mapfiles/kml/paddle/pink-circle.png",position:{lng:t.entregaLongitud,lat:t.entregaLatitud}}),e},[]);return t},$=e=>{let{orderDetails:t}=e,[i,n]=s.useState(12),[l,a]=s.useState({lat:40.79000695417712,lng:-74.02202221689599}),o=K(t);return s.useEffect(()=>{o&&(null==o?void 0:o.length)>0&&a(o[0].position)},[null==o?void 0:o.length]),(0,r.jsx)(O.Wrapper,{apiKey:"AIzaSyCpJ5JwuDPB5h3jk79q9C7QmABc-YdZ-1Q",render:U,children:(0,r.jsx)(Q,{center:l,zoom:i,children:null==o?void 0:o.map(e=>(0,r.jsx)(V,{position:e.position,label:e.label,icon:e.icon},e.position.lat))})})},X=e=>{var t;let{data:i}=e,[n,l]=(0,s.useState)(!1),[a,o]=(0,s.useState)("user02@gmail.com"),c=()=>l(!0),d=()=>l(!1),x=e=>{l(!1),o(e)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(R.Z,{title:"Geolocalizaci\xf3n",children:(0,r.jsx)(M.Z,{size:"small",onClick:c,disabled:(null==i?void 0:null===(t=i[0])||void 0===t?void 0:t.status)!==b.L1.Entregado,children:(0,r.jsx)(L.Z,{icon:"carbon:map",fontSize:20})})}),(0,r.jsxs)(q.Z,{onClose:d,"aria-labelledby":"simple-dialog-title",open:n,children:[(0,r.jsxs)(F.Z,{id:"full-screen-dialog-title",children:[(0,r.jsx)(h.Z,{variant:"h6",component:"span",children:"Geolocalizaci\xf3n"}),(0,r.jsx)(M.Z,{"aria-label":"close",onClick:x,sx:{top:8,right:10,position:"absolute",color:"grey.500"},children:(0,r.jsx)(L.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(G.Z,{children:(0,r.jsx)($,{orderDetails:i})})]})]})},ee=e=>{let{url:t}=e,[i,n]=(0,s.useState)(!1),[l,a]=(0,s.useState)("user02@gmail.com"),o=()=>n(!0),c=()=>n(!1),d=e=>{n(!1),a(e)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(R.Z,{title:"Firma recepci\xf3n",children:(0,r.jsx)(M.Z,{size:"small",onClick:o,disabled:!t,children:(0,r.jsx)(L.Z,{icon:"material-symbols:signature",fontSize:20})})}),(0,r.jsxs)(q.Z,{onClose:c,"aria-labelledby":"simple-dialog-title",open:i,children:[(0,r.jsxs)(F.Z,{id:"full-screen-dialog-title",children:[(0,r.jsx)(h.Z,{variant:"h6",component:"span",children:"Firma del recibidor"}),(0,r.jsx)(M.Z,{"aria-label":"close",onClick:d,sx:{top:8,right:10,position:"absolute",color:"grey.500"},children:(0,r.jsx)(L.Z,{icon:"mdi:close"})})]}),(0,r.jsx)(G.Z,{children:(0,r.jsx)("img",{src:t,height:200})})]})]})};(0,m.ZP)(o())(e=>{let{theme:t}=e;return{textDecoration:"none",color:t.palette.primary.main}});let et=[{flex:.15,field:"id",minWidth:120,headerName:"#",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(_.default,{title:t.noDocEntrega,data:t})}},{flex:.25,minWidth:250,field:"client",headerName:"Cliente",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(c.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{noWrap:!0,variant:"body2",sx:{color:"text.primary",textTransform:"capitalize"},children:t.cliente.nombre}),(0,r.jsx)(h.Z,{noWrap:!0,variant:"caption",children:t.cliente.codigo})]})})}},{flex:.25,field:"driver",minWidth:200,headerName:"Vendedor",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(c.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,r.jsx)(h.Z,{noWrap:!0,variant:"body2",sx:{color:"text.primary",fontWeight:600},children:t.vendedor.nombre}),(0,r.jsx)(h.Z,{noWrap:!0,variant:"caption",children:t.vendedor.codigo})]})})}},{flex:.15,field:"location",minWidth:100,headerName:"Total",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(c.Z,{sx:{display:"flex",alignItems:"center"},children:(0,r.jsx)(c.Z,{sx:{display:"flex",flexDirection:"column"},children:(0,r.jsx)(h.Z,{noWrap:!0,variant:"body2",sx:{color:"text.primary",textTransform:"capitalize"},children:t.status===b.L1.Entregado?(0,v.Z)(t.bruto_E):(0,v.Z)(t.bruto)})})})}},{flex:.18,minWidth:150,field:"date",headerName:"Fecha",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(h.Z,{variant:"body2",children:(0,Z.Z)(t.fecha)})}},{flex:.1,minWidth:120,field:"status",headerName:"Status",renderCell:e=>{let{row:t}=e;return(0,r.jsx)(f.Z,{skin:"light",size:"small",label:b.zD[null==t?void 0:t.status]||"",color:b.qG[t.status],sx:{textTransform:"capitalize"}})}}],ei=e=>{var t,i;let[n,l]=(0,s.useState)([]),[a,o]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[f,Z]=(0,s.useState)(null),[v,b]=(0,s.useState)([]),[y,E]=(0,s.useState)(null),[C,S]=(0,s.useState)({page:0,pageSize:20}),L=(0,p.I0)(),D=(0,p.v9)(e=>e.transports);console.log("storestorestore",D),(0,s.useEffect)(()=>{L((0,g.un)(e.noTransporte))},[L,m,a,n]);let k=[...et,{flex:.1,minWidth:130,sortable:!1,field:"actions",headerName:"Actions",renderCell:e=>{let{row:t}=e;return(0,r.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,r.jsx)(X,{data:[t]}),(0,r.jsx)(ee,{url:t.firmaUrl})]})}}];return(0,r.jsx)(j.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,spacing:6,children:[(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(N,{docsData:D.docsData,isLoading:D.isLoading})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(I,{docsData:(null===(t=D.docsData)||void 0===t?void 0:t.documentos)||[],isLoading:D.isLoading})}),(0,r.jsx)(d.ZP,{item:!0,xs:12,children:(0,r.jsx)(x.Z,{children:(0,r.jsx)(u._,{autoHeight:!0,pagination:!0,rows:(null===(i=D.docsData)||void 0===i?void 0:i.documentos)||[],columns:k,disableRowSelectionOnClick:!0,paginationModel:C,onPaginationModelChange:S,onRowSelectionModelChange:e=>b(e),getRowId:e=>e.noDocEntrega,loading:D.isLoading})})})]})})};var en=ei},80291:function(e,t,i){i.d(t,{Z:function(){return o}});var n=i(85893),l=i(87357),r=i(98456),s=i(15861);let a=e=>{let{isLoading:t,children:i}=e;return t?(0,n.jsxs)(l.Z,{sx:{mt:11,mb:11,width:"100%",display:"flex",alignItems:"center",flexDirection:"column"},children:[(0,n.jsx)(r.Z,{sx:{mb:4}}),(0,n.jsx)(s.Z,{variant:"caption",children:"Cargando..."})]}):(0,n.jsx)(n.Fragment,{children:i})};var o=a}}]);